# Johdanto

VIikon tehtävänä on harjaantua WEBBIpalvelu hyökkäyksissä ja tutustua ZAP proxy palvelimen käyttöön. Viikon tehtävissä käytetään vain sallittuja maaleja.

x)

## a) Asenna ZAP, generoi CA sertifikaatti ja asenna se selaimeen

Ensimmäisen tehtävän suoritin jo tunnin aikana mutta tunnin aikana en tehnyt muistiinpanoa tai laatinut raporttia.

ZAP proxy palvelimen asentaminen voidaan toteuttaa suoraan Kalin virallisesta reposta:

    ┌──(kynaniska㉿kynaniska)-[~]
    └─$ sudo apt-get install zaproxy
![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/23639faa-9616-49e2-8e61-75e3f62a7847)

Käynistin ZAP proxyn joka kestää noin minuuttin. ZAP toimii minulla portissa 8081. Vaihdoin oletus portin 8080 toiseen koska käytin foxyproxya aikasemmin.
Kuvankaappauksesta näkyy että ZAP alkaa seurata kaikkea liikenettä mitä firefox selaimessa tapahtuu. Kuvassa menin sivulle `google.com`. 

Käytän google.com esimerkkinä koska en tee aktiivisia toimia sitä vastaan. Jos haluaisin tehdä aktiivisia toimia minun pitäisi käyttää hyväksyttyä kohdetta kuten `webgoat`.

ZAP luo automaattisesti "Väärenetyn" sertifikaatin. Sen saa esille ZAP valikosta `tools/preferences/network/Server sertificates`.

![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/f24659f6-5bcf-473b-8b11-74a965495ac6)

Sertifikaatin voi asentaa selaimelle valikosta `setting/Security/Certificates` 

![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/d4545055-f08d-4d2a-b4f5-51a51de883d6)

Kuvankaappauksesta näkyy generoimani sertifikaatti. `ZAP Attack Proxy ROOT CA`.

Jotta saan ZAP analyysissä kuvat näkyviin ne pitää laittaa päälle asetuksista. Ne eivät ole vakiona päällä.

![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/4c893e81-423d-4a84-a40a-3197f8019029)

Nyt on ZAP valmiina hyökkäyksiä varten!!

## b)Foxyproxy ja sen käyttö

FoxyProxy on mozilla firefoxiin asennettava lisäosa. Lisäosa toimii proxyna ja mahdollistaa localhost liikenteen reitittyvän ZAP palvelimelle.

Foxyproxy on saatavilla sivulla: https://getfoxyproxy.org/

Foxyproxy on käytännössä tässä tapauksessa proxyn proxy. Eli kun koneeni ottaa yhteyttä esim. google.com sen hakupyynnöt ohjautuvat ensiksi foxyproxyyn ja sen jälkeen ZAP proxyyn.

Asetukseni näyttävät seuraavalta:

![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/83a28371-4ae5-4d82-95d4-878a0de5c88c)



Jotta ZAP ei vahingossakaan sieppaisi liikennettä tai hyökkäisi kohteisiin jota en haluaisi niin käytän Pattern asetuksia. Pattern mahdollistaa sen että FoxyProxy ohjaa vain tietyn sivuston liikenteen ZAP palvelimelle. Tämän viikon harjoituksissa tulemme käyttämään `localhost` sekä `portswigger.com` sivustoja.

Foxyproxy lisäosasta pitää vielä valita `Proxy by pattern`

![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/d7e60124-f8d4-47f4-95c8-15ff44434013)

Kokeilen tätä menemällä `portswigger.com` sivustolle selaimella jonka jälkeen menen ZAP valikkoon tarkastamaan tulosta.

![image](https://github.com/FredrikAkerlund/Starting-pentesting/assets/122887178/daca3ee4-3bf2-491a-805a-9c7c9b0294df)

Kun menen google.com niin ZAP ohjelmaan ei ilmesty mitää liikenettä.


## k) Webgoat 2023.4

Aikaisemmissa tehtävissä olin jo asentanut Webgoatin. 

Asennustiedostot löytyvät: https://github.com/WebGoat/WebGoat/releases/download/v2023.4/webgoat-2023.4.jar

Asennus tapahtuu komennoilla.

        wget https://github.com/WebGoat/WebGoat/releases/download/v2023.4/webgoat-2023.4.jar
        java -jar webgoat-2023.4 jar.
## i) Pencode

Tehtävänä on asentaa Pencode. Pencode on ´saatavilla Githubista: https://github.com/ffuf/pencode/tree/master.
Pencoden kehittäjä on Joohoi joka on myös kehittänyt FFuF jota aikasemmin käytimme kurssilla.

Pencode on myös saatavilla Kalin virallisessa repossa:

        sudo apt install golang-github-ffuf-pencode-dev
        Do you want to install it? (N/y)N

Pencode avulla on mahdollista koodata tekstiä haluttuun muotoon kuten UTF8, UTF16 jne. Sillä voi myös koodata tekstiä tiivisteiksi kuten SHA256 ja MD5.

        ┌──(kynaniska㉿kynaniska)-[~/pencode]
        └─$ echo 'hello world' | pencode md5   ## Koodaa hello world MD5 tiivisteeksi     
        5eb63bbbe01eeed093cb22bb8f5acdc3 ##MD5 tiiviste

Kokeilen vielä hashcatilla avata tiivisteen.

        ┌──(kynaniska㉿kynaniska)-[~/pencode]
        └─$ hashcat -m 0 testi /usr/share/wordlists/rockyou.txt
        5eb63bbbe01eeed093cb22bb8f5acdc3:hello world  

Voin todeta että `Pencode` toimii!








